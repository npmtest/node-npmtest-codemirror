<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-codemirror/node_modules/codemirror/mode/puppet/puppet.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-codemirror">npmtest-codemirror (v0.0.2)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-codemirror/node_modules/codemirror/mode/puppet/puppet.js</span></h1>
    <h2>
        
        Statements: <span class="metric">7.48% <small>(8 / 107)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">4.23% <small>(3 / 71)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">25% <small>(2 / 8)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">7.55% <small>(8 / 106)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-codemirror/node_modules/codemirror/mode/puppet/</a> &#187; puppet.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
&nbsp;
(function(mod) {
  <span class="missing-if-branch" title="else path not taken" >E</span>if (typeof exports == "object" &amp;&amp; typeof module == "object") // CommonJS
    mod(require("../../lib/codemirror"));
  else <span class="cstat-no" title="statement not covered" >if (typeof define == "function" &amp;&amp; define.amd) // AMD</span>
<span class="cstat-no" title="statement not covered" >    define(["../../lib/codemirror"], mod);</span>
  else // Plain browser env
<span class="cstat-no" title="statement not covered" >    mod(CodeMirror);</span>
})(function(CodeMirror) {
"use strict";
&nbsp;
CodeMirror.defineMode("puppet", <span class="fstat-no" title="function not covered" >function () {</span>
  // Stores the words from the define method
<span class="cstat-no" title="statement not covered" >  var words = {};</span>
  // Taken, mostly, from the Puppet official variable standards regex
<span class="cstat-no" title="statement not covered" >  var variable_regex = /({)?([a-z][a-z0-9_]*)?((::[a-z][a-z0-9_]*)*::)?[a-zA-Z0-9_]+(})?/;</span>
&nbsp;
  // Takes a string of words separated by spaces and adds them as
  // keys with the value of the first argument 'style'
<span class="fstat-no" title="function not covered" >  function define(style, string) {</span>
<span class="cstat-no" title="statement not covered" >    var split = string.split(' ');</span>
<span class="cstat-no" title="statement not covered" >    for (var i = 0; i &lt; split.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      words[split[i]] = style;</span>
    }
  }
&nbsp;
  // Takes commonly known puppet types/words and classifies them to a style
<span class="cstat-no" title="statement not covered" >  define('keyword', 'class define site node include import inherits');</span>
<span class="cstat-no" title="statement not covered" >  define('keyword', 'case if else in and elsif default or');</span>
<span class="cstat-no" title="statement not covered" >  define('atom', 'false true running present absent file directory undef');</span>
<span class="cstat-no" title="statement not covered" >  define('builtin', 'action augeas burst chain computer cron destination dport exec ' +</span>
    'file filebucket group host icmp iniface interface jump k5login limit log_level ' +
    'log_prefix macauthorization mailalias maillist mcx mount nagios_command ' +
    'nagios_contact nagios_contactgroup nagios_host nagios_hostdependency ' +
    'nagios_hostescalation nagios_hostextinfo nagios_hostgroup nagios_service ' +
    'nagios_servicedependency nagios_serviceescalation nagios_serviceextinfo ' +
    'nagios_servicegroup nagios_timeperiod name notify outiface package proto reject ' +
    'resources router schedule scheduled_task selboolean selmodule service source ' +
    'sport ssh_authorized_key sshkey stage state table tidy todest toports tosource ' +
    'user vlan yumrepo zfs zone zpool');
&nbsp;
  // After finding a start of a string ('|") this function attempts to find the end;
  // If a variable is encountered along the way, we display it differently when it
  // is encapsulated in a double-quoted string.
<span class="fstat-no" title="function not covered" >  function tokenString(stream, state) {</span>
<span class="cstat-no" title="statement not covered" >    var current, prev, found_var = false;</span>
<span class="cstat-no" title="statement not covered" >    while (!stream.eol() &amp;&amp; (current = stream.next()) != state.pending) {</span>
<span class="cstat-no" title="statement not covered" >      if (current === '$' &amp;&amp; prev != '\\' &amp;&amp; state.pending == '"') {</span>
<span class="cstat-no" title="statement not covered" >        found_var = true;</span>
<span class="cstat-no" title="statement not covered" >        break;</span>
      }
<span class="cstat-no" title="statement not covered" >      prev = current;</span>
    }
<span class="cstat-no" title="statement not covered" >    if (found_var) {</span>
<span class="cstat-no" title="statement not covered" >      stream.backUp(1);</span>
    }
<span class="cstat-no" title="statement not covered" >    if (current == state.pending) {</span>
<span class="cstat-no" title="statement not covered" >      state.continueString = false;</span>
    } else {
<span class="cstat-no" title="statement not covered" >      state.continueString = true;</span>
    }
<span class="cstat-no" title="statement not covered" >    return "string";</span>
  }
&nbsp;
  // Main function
<span class="fstat-no" title="function not covered" >  function tokenize(stream, state) {</span>
    // Matches one whole word
<span class="cstat-no" title="statement not covered" >    var word = stream.match(/[\w]+/, false);</span>
    // Matches attributes (i.e. ensure =&gt; present ; 'ensure' would be matched)
<span class="cstat-no" title="statement not covered" >    var attribute = stream.match(/(\s+)?\w+\s+=&gt;.*/, false);</span>
    // Matches non-builtin resource declarations
    // (i.e. "apache::vhost {" or "mycustomclasss {" would be matched)
<span class="cstat-no" title="statement not covered" >    var resource = stream.match(/(\s+)?[\w:_]+(\s+)?{/, false);</span>
    // Matches virtual and exported resources (i.e. @@user { ; and the like)
<span class="cstat-no" title="statement not covered" >    var special_resource = stream.match(/(\s+)?[@]{1,2}[\w:_]+(\s+)?{/, false);</span>
&nbsp;
    // Finally advance the stream
<span class="cstat-no" title="statement not covered" >    var ch = stream.next();</span>
&nbsp;
    // Have we found a variable?
<span class="cstat-no" title="statement not covered" >    if (ch === '$') {</span>
<span class="cstat-no" title="statement not covered" >      if (stream.match(variable_regex)) {</span>
        // If so, and its in a string, assign it a different color
<span class="cstat-no" title="statement not covered" >        return state.continueString ? 'variable-2' : 'variable';</span>
      }
      // Otherwise return an invalid variable
<span class="cstat-no" title="statement not covered" >      return "error";</span>
    }
    // Should we still be looking for the end of a string?
<span class="cstat-no" title="statement not covered" >    if (state.continueString) {</span>
      // If so, go through the loop again
<span class="cstat-no" title="statement not covered" >      stream.backUp(1);</span>
<span class="cstat-no" title="statement not covered" >      return tokenString(stream, state);</span>
    }
    // Are we in a definition (class, node, define)?
<span class="cstat-no" title="statement not covered" >    if (state.inDefinition) {</span>
      // If so, return def (i.e. for 'class myclass {' ; 'myclass' would be matched)
<span class="cstat-no" title="statement not covered" >      if (stream.match(/(\s+)?[\w:_]+(\s+)?/)) {</span>
<span class="cstat-no" title="statement not covered" >        return 'def';</span>
      }
      // Match the rest it the next time around
<span class="cstat-no" title="statement not covered" >      stream.match(/\s+{/);</span>
<span class="cstat-no" title="statement not covered" >      state.inDefinition = false;</span>
    }
    // Are we in an 'include' statement?
<span class="cstat-no" title="statement not covered" >    if (state.inInclude) {</span>
      // Match and return the included class
<span class="cstat-no" title="statement not covered" >      stream.match(/(\s+)?\S+(\s+)?/);</span>
<span class="cstat-no" title="statement not covered" >      state.inInclude = false;</span>
<span class="cstat-no" title="statement not covered" >      return 'def';</span>
    }
    // Do we just have a function on our hands?
    // In 'ensure_resource("myclass")', 'ensure_resource' is matched
<span class="cstat-no" title="statement not covered" >    if (stream.match(/(\s+)?\w+\(/)) {</span>
<span class="cstat-no" title="statement not covered" >      stream.backUp(1);</span>
<span class="cstat-no" title="statement not covered" >      return 'def';</span>
    }
    // Have we matched the prior attribute regex?
<span class="cstat-no" title="statement not covered" >    if (attribute) {</span>
<span class="cstat-no" title="statement not covered" >      stream.match(/(\s+)?\w+/);</span>
<span class="cstat-no" title="statement not covered" >      return 'tag';</span>
    }
    // Do we have Puppet specific words?
<span class="cstat-no" title="statement not covered" >    if (word &amp;&amp; words.hasOwnProperty(word)) {</span>
      // Negates the initial next()
<span class="cstat-no" title="statement not covered" >      stream.backUp(1);</span>
      // rs move the stream
<span class="cstat-no" title="statement not covered" >      stream.match(/[\w]+/);</span>
      // We want to process these words differently
      // do to the importance they have in Puppet
<span class="cstat-no" title="statement not covered" >      if (stream.match(/\s+\S+\s+{/, false)) {</span>
<span class="cstat-no" title="statement not covered" >        state.inDefinition = true;</span>
      }
<span class="cstat-no" title="statement not covered" >      if (word == 'include') {</span>
<span class="cstat-no" title="statement not covered" >        state.inInclude = true;</span>
      }
      // Returns their value as state in the prior define methods
<span class="cstat-no" title="statement not covered" >      return words[word];</span>
    }
    // Is there a match on a reference?
<span class="cstat-no" title="statement not covered" >    if (/(^|\s+)[A-Z][\w:_]+/.test(word)) {</span>
      // Negate the next()
<span class="cstat-no" title="statement not covered" >      stream.backUp(1);</span>
      // Match the full reference
<span class="cstat-no" title="statement not covered" >      stream.match(/(^|\s+)[A-Z][\w:_]+/);</span>
<span class="cstat-no" title="statement not covered" >      return 'def';</span>
    }
    // Have we matched the prior resource regex?
<span class="cstat-no" title="statement not covered" >    if (resource) {</span>
<span class="cstat-no" title="statement not covered" >      stream.match(/(\s+)?[\w:_]+/);</span>
<span class="cstat-no" title="statement not covered" >      return 'def';</span>
    }
    // Have we matched the prior special_resource regex?
<span class="cstat-no" title="statement not covered" >    if (special_resource) {</span>
<span class="cstat-no" title="statement not covered" >      stream.match(/(\s+)?[@]{1,2}/);</span>
<span class="cstat-no" title="statement not covered" >      return 'special';</span>
    }
    // Match all the comments. All of them.
<span class="cstat-no" title="statement not covered" >    if (ch == "#") {</span>
<span class="cstat-no" title="statement not covered" >      stream.skipToEnd();</span>
<span class="cstat-no" title="statement not covered" >      return "comment";</span>
    }
    // Have we found a string?
<span class="cstat-no" title="statement not covered" >    if (ch == "'" || ch == '"') {</span>
      // Store the type (single or double)
<span class="cstat-no" title="statement not covered" >      state.pending = ch;</span>
      // Perform the looping function to find the end
<span class="cstat-no" title="statement not covered" >      return tokenString(stream, state);</span>
    }
    // Match all the brackets
<span class="cstat-no" title="statement not covered" >    if (ch == '{' || ch == '}') {</span>
<span class="cstat-no" title="statement not covered" >      return 'bracket';</span>
    }
    // Match characters that we are going to assume
    // are trying to be regex
<span class="cstat-no" title="statement not covered" >    if (ch == '/') {</span>
<span class="cstat-no" title="statement not covered" >      stream.match(/.*?\//);</span>
<span class="cstat-no" title="statement not covered" >      return 'variable-3';</span>
    }
    // Match all the numbers
<span class="cstat-no" title="statement not covered" >    if (ch.match(/[0-9]/)) {</span>
<span class="cstat-no" title="statement not covered" >      stream.eatWhile(/[0-9]+/);</span>
<span class="cstat-no" title="statement not covered" >      return 'number';</span>
    }
    // Match the '=' and '=&gt;' operators
<span class="cstat-no" title="statement not covered" >    if (ch == '=') {</span>
<span class="cstat-no" title="statement not covered" >      if (stream.peek() == '&gt;') {</span>
<span class="cstat-no" title="statement not covered" >          stream.next();</span>
      }
<span class="cstat-no" title="statement not covered" >      return "operator";</span>
    }
    // Keep advancing through all the rest
<span class="cstat-no" title="statement not covered" >    stream.eatWhile(/[\w-]/);</span>
    // Return a blank line for everything else
<span class="cstat-no" title="statement not covered" >    return null;</span>
  }
  // Start it all
<span class="cstat-no" title="statement not covered" >  return {</span>
    startState: <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >      var state = {};</span>
<span class="cstat-no" title="statement not covered" >      state.inDefinition = false;</span>
<span class="cstat-no" title="statement not covered" >      state.inInclude = false;</span>
<span class="cstat-no" title="statement not covered" >      state.continueString = false;</span>
<span class="cstat-no" title="statement not covered" >      state.pending = false;</span>
<span class="cstat-no" title="statement not covered" >      return state;</span>
    },
    token: <span class="fstat-no" title="function not covered" >function (stream, state) {</span>
      // Strip the spaces, but regex will account for them eitherway
<span class="cstat-no" title="statement not covered" >      if (stream.eatSpace()) <span class="cstat-no" title="statement not covered" >return null;</span></span>
      // Go through the main process
<span class="cstat-no" title="statement not covered" >      return tokenize(stream, state);</span>
    }
  };
});
&nbsp;
CodeMirror.defineMIME("text/x-puppet", "puppet");
&nbsp;
});
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 25 2017 03:59:33 GMT+0000 (UTC)</div>
</div>
</body>
</html>
